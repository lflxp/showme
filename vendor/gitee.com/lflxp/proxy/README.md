# ‰ªãÁªç

Â≠¶‰π†„ÄÅ‰ΩøÁî®„ÄÅÂ∞ÅË£ÖgolangÁöÑÂèçÂêë‰ª£ÁêÜÔºåÂÆûÁé∞HTTPÂíåTCPÁöÑÂèçÂêë‰ª£ÁêÜÂäüËÉΩ

# ÂäüËÉΩ

## Ëá™ÂÆö‰πâÂèçÂêë‰ª£ÁêÜ

`func NewHttpProxyByGinCustom(target string, filter map[string]string) func(c *gin.Context)`ÁîüÊàêginÊ°ÜÊû∂ÈÄÇÂ∫îÁöÑ7Â±ÇÂèçÂêë‰ª£ÁêÜ„ÄÇ

ÂèÇÊï∞ËØ¥Êòé:

1. target ÈúÄË¶ÅÂèçÂêë‰ª£ÁêÜÁöÑÊúçÂä°Âô®ÔºåÂèØ‰ª•ÊòØÂüüÂêç‰πüÂèØ‰ª•ÊòØip+Á´ØÂè£ÔºåÈúÄË¶ÅÂÜôÂÖ®Ë∑ØÂæÑÔºöhttps://www.baidu.com ÊàñËÄÖ http://127.0.0.1:9906 ,`ÂÖ∂‰∏≠http:// Êàñ https:// Schema‰∏çËÉΩÂ∞ë`
2. filter ÊòØÈúÄË¶ÅÈâ¥ÊùÉÁöÑHeaderÔºåÂèØ‰ª•Â°´nil‰∏çËøõË°åÊ†°È™åÔºåÊ†°È™åÂøÖÈ°ªÊª°Ë∂≥ÊâçËÉΩÈÄöËøá

## TCPÂèçÂêë‰ª£ÁêÜ

`func NewTCPProxy(from, to string) error` ÂéüÂú∞ÂêØÂä®tcpÊúçÂä°

ÂèÇÊï∞ËØ¥ÊòéÔºö

1. from Êú¨Âú∞ÂêØÂä®ÊúçÂä°Ôºå‰æãÂ¶Ç: 127.0.0.1:6000 ÊàñËÄÖ 0.0.0.0:6000 `‰∏çÈúÄË¶Åhttp://`
2. to ÈúÄË¶ÅÂèçÂêë‰ª£ÁêÜÁöÑÂêéÁ´ØÊúçÂä°Âô®Ôºå‰æãÂ¶ÇÔºö 127.0.0.1:3306

# ËøêË°å

> make

```
root in proxy on ÓÇ† master [‚úò!?] via üêπ v1.16.6 took 37s 
‚ùØ make 
go run examples/main.go
2021-10-28T23:05:31+08:00 | INFO  | ***tcp-proxy started.**** backend:127.0.0.1:9998 bind:0.0.0.0:9999
2021-10-28T23:05:36+08:00 | INFO  | ***client connected.**** conn:172.21.64.1:58387
2021-10-28T23:05:36+08:00 | INFO  | ***client connected.**** conn:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | INFO  | ***backend connected.**** backend:127.0.0.1:34048 conn:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | INFO  | ***backend connected.**** backend:127.0.0.1:34046 conn:172.21.64.1:58387
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:172.21.64.1:58388 recv:549 send:549 to:127.0.0.1:9998
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:3090 send:3090 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:172.21.64.1:58388 recv:462 send:462 to:127.0.0.1:9998
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
2021-10-28T23:05:36+08:00 | DEBUG | ***Proxyying**** from:127.0.0.1:9998 recv:4096 send:4096 to:172.21.64.1:58388
```

# ËµÑÊñô

https://blog.csdn.net/mengxinghuiku/article/details/65448600