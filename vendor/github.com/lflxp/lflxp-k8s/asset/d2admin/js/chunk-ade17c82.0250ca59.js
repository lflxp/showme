(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ade17c82"],{"2d5b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加/修改Labels",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentLabelKey,callback:function(t){e.currentLabelKey=t},expression:"currentLabelKey"}})],1),a("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentLabelValue,callback:function(t){e.currentLabelValue=t},expression:"currentLabelValue"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchLabels(e.currentLabelName)}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加/修改Annotations",visible:e.dialogFormVisibleAnnotations},on:{"update:visible":function(t){e.dialogFormVisibleAnnotations=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentATKey,callback:function(t){e.currentATKey=t},expression:"currentATKey"}})],1),a("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentATValue,callback:function(t){e.currentATValue=t},expression:"currentATValue"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleAnnotations=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchAnnotations(e.currentLabelName)}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.kinds,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.labelTitle,name:"labels"}},[a("el-table",{attrs:{data:e.labels,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),a("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editlabels(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletelabels(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"success"},on:{click:e.addlabel}},[e._v("添加")])],1)],1),a("el-tab-pane",{attrs:{label:e.annotationsTitle,name:"annotations"}},[a("el-table",{attrs:{data:e.annotations,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),a("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editAnnotations(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteAnnotations(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"success"},on:{click:e.addAnnotations}},[e._v("添加")])],1)],1),a("el-tab-pane",{attrs:{label:"YAML",name:"fourth"}},[a("vue-json-editor",{attrs:{showBtns:!0,mode:"tree",lang:"zh",expandedOnStart:!0},on:{"json-change":e.onJsonChange,"json-save":e.onJsonSave},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],o=a("b85c"),s=a("ade3"),l=(a("b0c0"),a("b64b"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("4fad"),a("159b"),a("a434"),a("ad8f")),r=a("45a3"),c={name:"d2-container-frame",components:{vueJsonEditor:r["a"]},props:{data:{type:Object,required:!0},group:{type:String,required:!0,default:""},version:{type:String,required:!0,default:"v1"},resource:{type:String,required:!0,default:"deployments"},namespace:{type:String,required:!0,default:""},show:{type:Boolean,require:!0,default:!1}},data:function(){var e;return e={dialogFormVisible:!1,dialogFormVisibleAnnotations:!1,formLabelWidth:"120px",currentLabelKey:"",currentLabelValue:"",currentATKey:"",currentATValue:"",labelsData:[],annotationsData:[],disableKey:!0},Object(s["a"])(e,"formLabelWidth","120px"),Object(s["a"])(e,"activeName","labels"),Object(s["a"])(e,"jsonData",""),Object(s["a"])(e,"dialogVisible",this.show),e},mounted:function(){console.log("k8s-label-annotations enabled",this.data)},watch:{show:function(e){this.dialogVisible=e}},computed:{namespace:function(){return this.data.metadata.namespace},kinds:function(){return console.log("kinds",this.data),"["+this.data.kind+"] "+this.data.metadata.name},currentLabelName:function(){return this.data.metadata.name},labelTitle:function(){var e="";return e=void 0!==this.data.metadata.labels?"标签 "+Object.keys(this.data.metadata.labels).length:"标签 0",e},annotationsTitle:function(){var e="";return e=void 0!==this.data.metadata.annotations?"注释"+Object.keys(this.data.metadata.annotations).length:"注释 0",e},labels:{get:function(){var e=[];if(void 0!==this.data.metadata.labels){var t,a=new Map(Object.entries(this.data.metadata.labels)),n=Object(o["a"])(a.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value,s={key:i,value:a.get(i)};e.push(s)}}catch(l){n.e(l)}finally{n.f()}}return e},set:function(e){this.labels=e}},annotations:{get:function(){console.log("annotations");var e=[];if(void 0!==this.data.metadata.annotations){var t,a=new Map(Object.entries(this.data.metadata.annotations)),n=Object(o["a"])(a.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value,s={key:i,value:a.get(i)};e.push(s)}}catch(l){n.e(l)}finally{n.f()}}return e},set:function(e){this.annotationsData=e}}},methods:{editlabels:function(e){this.dialogFormVisible=!0,console.log("editlabels",e),this.currentLabelKey=e["key"],this.currentLabelValue=e["value"],this.disableKey=!0},editAnnotations:function(e){this.dialogFormVisibleAnnotations=!0,console.log("editlabels",e),this.currentATKey=e["key"],this.currentATValue=e["value"],this.disableKey=!0},addlabel:function(){this.currentLabelKey="",this.currentLabelValue="",this.dialogFormVisible=!0,this.disableKey=!1},addAnnotations:function(){this.currentATKey="",this.disableKey=!1,this.currentATValue="",this.dialogFormVisibleAnnotations=!0},parseLabels:function(e){if(console.log("parseLabels",e),this.dialogVisible=!0,void 0!==e.labels){var t=new Map(Object.entries(e.labels));this.labels=[];var a,n=Object(o["a"])(t.keys());try{for(n.s();!(a=n.n()).done;){var i=a.value,s={key:i,value:t.get(i)};this.labels.push(s)}}catch(d){n.e(d)}finally{n.f()}}if(void 0!==e.annotations){var l=new Map(Object.entries(e.annotations));this.annotations=[];var r,c=Object(o["a"])(l.keys());try{for(c.s();!(r=c.n()).done;){var u=r.value;s={key:u,value:l.get(u)};this.annotations.push(s)}}catch(d){c.e(d)}finally{c.f()}}console.log("labels",this.labels,this.annotations)},deletelabels:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.data;delete a["metadata"]["labels"][e["key"]];var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:this.currentLabelName,data:a};Object(l["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.$notify({title:"成功",message:"成功删除Labels "+e,type:"success"})}))},deleteAnnotations:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.data;delete a["metadata"]["annotations"][e["key"]];var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:this.currentLabelName,data:a};Object(l["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.$notify({title:"成功",message:"成功删除Annotations "+e,type:"success"})}))},patchLabels:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentLabelKey]=this.currentLabelValue;var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e,patchdatastrate:{metadata:{labels:a}}};Object(l["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(e,a){e["key"]==t.currentLabelKey&&t.labels.splice(a,1)})),t.$notify({title:"成功",message:"成功新增/修改Labels "+a,type:"success"})}))},patchAnnotations:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentATKey]=this.currentATValue;var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e,patchdatastrate:{metadata:{annotations:a}}};Object(l["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(e,a){e["key"]==t.currentATKey&&t.labels.splice(a,1)})),t.$notify({title:"成功",message:"成功新增/修改Annotations "+a,type:"success"})}))},onJsonChange:function(e){console.log("value: change",e)},onJsonSave:function(e){console.log("value save:",e);var t={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e.metadata.name,data:e};Object(l["d"])(t).then((function(e){console.log("resp",e)}))}}},u=c,d=(a("ca3c"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,"5a28a0b9",null);t["default"]=f.exports},"4ec9":function(e,t,a){"use strict";var n=a("6d61"),i=a("6566");e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"4fad":function(e,t,a){var n=a("23e7"),i=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},6566:function(e,t,a){"use strict";var n=a("9bf2").f,i=a("7c73"),o=a("e2cc"),s=a("0366"),l=a("19aa"),r=a("2266"),c=a("7dd0"),u=a("2626"),d=a("83ab"),f=a("f183").fastKey,b=a("69f3"),h=b.set,v=b.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,n){l(e,u,t),h(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&r(n,e[c],{that:e,AS_ENTRIES:a})})),b=v(t),p=function(e,t,a){var n,i,o=b(e),s=m(e,t);return s?s.value=a:(o.last=s={index:i=f(t,!0),key:t,value:a,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),d?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},m=function(e,t){var a,n=b(e),i=f(t);if("F"!==i)return n.index[i];for(a=n.first;a;a=a.next)if(a.key==t)return a};return o(u.prototype,{clear:function(){var e=this,t=b(e),a=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete a[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=b(t),n=m(t,e);if(n){var i=n.next,o=n.previous;delete a.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),a.first==n&&(a.first=i),a.last==n&&(a.last=o),d?a.size--:t.size--}return!!n},forEach:function(e){var t,a=b(this),n=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),o(u.prototype,a?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return p(this,0===e?0:e,t)}}:{add:function(e){return p(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return b(this).size}}),u},setStrong:function(e,t,a){var n=t+" Iterator",i=v(t),o=v(n);c(e,t,(function(e,t){h(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"69d9":function(e,t,a){},"6d61":function(e,t,a){"use strict";var n=a("23e7"),i=a("da84"),o=a("94ca"),s=a("6eeb"),l=a("f183"),r=a("2266"),c=a("19aa"),u=a("861d"),d=a("d039"),f=a("1c7e"),b=a("d44e"),h=a("7156");e.exports=function(e,t,a){var v=-1!==e.indexOf("Map"),p=-1!==e.indexOf("Weak"),m=v?"set":"add",g=i[e],y=g&&g.prototype,k=g,L={},w=function(e){var t=y[e];s(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return p&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})},x=o(e,"function"!=typeof g||!(p||y.forEach&&!d((function(){(new g).entries().next()}))));if(x)k=a.getConstructor(t,e,v,m),l.REQUIRED=!0;else if(o(e,!0)){var V=new k,A=V[m](p?{}:-0,1)!=V,j=d((function(){V.has(1)})),_=f((function(e){new g(e)})),K=!p&&d((function(){var e=new g,t=5;while(t--)e[m](t,t);return!e.has(-0)}));_||(k=t((function(t,a){c(t,k,e);var n=h(new g,t,k);return void 0!=a&&r(a,n[m],{that:n,AS_ENTRIES:v}),n})),k.prototype=y,y.constructor=k),(j||K)&&(w("delete"),w("has"),v&&w("get")),(K||A)&&w(m),p&&y.clear&&delete y.clear}return L[e]=k,n({global:!0,forced:k!=g},L),b(k,e),p||a.setStrong(k,e,v),k}},"6f53":function(e,t,a){var n=a("83ab"),i=a("df75"),o=a("fc6a"),s=a("d1e7").f,l=function(e){return function(t){var a,l=o(t),r=i(l),c=r.length,u=0,d=[];while(c>u)a=r[u++],n&&!s.call(l,a)||d.push(e?[a,l[a]]:l[a]);return d}};e.exports={entries:l(!0),values:l(!1)}},bb2f:function(e,t,a){var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},ca3c:function(e,t,a){"use strict";a("69d9")},f183:function(e,t,a){var n=a("d012"),i=a("861d"),o=a("5135"),s=a("9bf2").f,l=a("90e3"),r=a("bb2f"),c=l("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){s(e,c,{value:{objectID:"O"+u++,weakData:{}}})},b=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},h=function(e,t){if(!o(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},v=function(e){return r&&p.REQUIRED&&d(e)&&!o(e,c)&&f(e),e},p=e.exports={REQUIRED:!1,fastKey:b,getWeakData:h,onFreeze:v};n[c]=!0}}]);