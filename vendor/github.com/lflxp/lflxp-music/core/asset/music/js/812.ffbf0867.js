"use strict";(self["webpackChunkvue_mmplayer"]=self["webpackChunkvue_mmplayer"]||[]).push([[812],{8566:function(t,e,s){s.d(e,{Z:function(){return r}});var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"mm-loading",style:{backgroundColor:t.loadingBgColor}},[e("div",{staticClass:"mm-loading-content"},[e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])},i=[],m={name:"MmLoading",props:{value:{type:Boolean,default:!0},loadingBgColor:{type:String,default:""}}},o=m,n=s(1001),l=(0,n.Z)(o,a,i,!1,null,null,null),r=l.exports},9812:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment",on:{scroll:function(e){return t.listScroll(e)}}},[e("mm-loading",{model:{value:t.mmLoadShow,callback:function(e){t.mmLoadShow=e},expression:"mmLoadShow"}}),t.hotComments.length>0?e("dl",{staticClass:"comment-list"},[e("dt",{staticClass:"comment-title"},[t._v("精彩评论")]),t._l(t.hotComments,(function(s){return e("dd",{key:s.commentId,staticClass:"comment-item"},[e("a",{attrs:{target:"_blank",href:`https://music.163.com/#/user/home?id=${s.user.userId}`}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:`${s.user.avatarUrl}?param=50y50`,expression:"`${item.user.avatarUrl}?param=50y50`"}],staticClass:"comment-item-pic"}),e("h2",{staticClass:"comment-item-title"},[t._v(t._s(s.user.nickname))])]),e("p",{staticClass:"comment-item-disc"},[t._v(t._s(s.content))]),e("div",{staticClass:"comment-item-opt"},[e("span",{staticClass:"comment-opt-date"},[t._v(t._s(t._f("format")(s.time)))]),e("span",{staticClass:"comment-opt-liked"},[e("mm-icon",{attrs:{type:"good"}}),t._v(" "+t._s(s.likedCount)+" ")],1)])])}))],2):t._e(),t.commentList.length>0?e("dl",{staticClass:"comment-list"},[e("dt",{staticClass:"comment-title"},[t._v("最新评论（"+t._s(t.total)+"）")]),t._l(t.commentList,(function(s){return e("dd",{key:s.commentId,staticClass:"comment-item"},[e("a",{staticClass:"comment-item-pic",attrs:{target:"_blank",href:`https://music.163.com/#/user/home?id=${s.user.userId}`}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:`${s.user.avatarUrl}?param=50y50`,expression:"`${item.user.avatarUrl}?param=50y50`"}],staticClass:"cover-img"})]),e("h2",{staticClass:"comment-item-title"},[e("a",{attrs:{target:"_blank",href:`https://music.163.com/#/user/home?id=${s.user.userId}`}},[t._v(" "+t._s(s.user.nickname)+" ")])]),e("p",{staticClass:"comment-item-disc"},[t._v(t._s(s.content))]),t._l(s.beReplied,(function(s){return e("div",{key:s.user.userId,staticClass:"comment-item-replied"},[e("a",{attrs:{target:"_blank",href:`https://music.163.com/#/user/home?id=${s.user.userId}`}},[t._v(" "+t._s(s.user.nickname)+" ")]),t._v(" ："+t._s(s.content)+" ")])})),e("div",{staticClass:"comment-item-opt"},[e("span",{staticClass:"comment-opt-date"},[t._v(t._s(t._f("format")(s.time)))]),s.likedCount>0?e("span",{staticClass:"comment-opt-liked"},[e("mm-icon",{attrs:{type:"good"}}),t._v(" "+t._s(s.likedCount)+" ")],1):t._e()])],2)}))],2):t._e()],1)},i=[],m=s(60),o=s(6879),n=s(8566),l=s(6250),r={name:"Comment",components:{MmLoading:n.Z},filters:{format(t){let e;const s=new Date(t),a={year:s.getFullYear(),month:s.getMonth(),date:s.getDate(),hours:s.getHours(),minutes:s.getMinutes()},i=new Date,m=i.getTime()-t;return e=i.getDate()===a.date&&m<6e4?"刚刚":i.getDate()===a.date&&m>6e4&&m<36e5?`${Math.floor(m/6e4)}分钟前`:i.getDate()===a.date&&m>36e5&&m<864e5?`${(0,o.vL)(a.hours)}:${(0,o.vL)(a.minutes)}`:i.getDate()!==a.date&&m<864e5?`昨天${(0,o.vL)(a.hours)}:${(0,o.vL)(a.minutes)}`:i.getFullYear()===a.year?`${a.month+1}月${a.date}日`:`${a.year}年${a.month+1}月${a.date}日`,e}},mixins:[l.q],data(){return{lockUp:!0,page:0,hotComments:[],commentList:[],total:null}},watch:{commentList(t,e){t.length!==e.length&&(this.lockUp=!1)}},created(){this.initData()},methods:{initData(){(0,m.d7)(this.$route.params.id,this.page).then((t=>{this.hotComments=t.hotComments,this.commentList=t.comments,this.total=t.total,this.lockUp=!0,this._hideLoad()}))},listScroll(t){if(this.lockUp)return;const{scrollTop:e,scrollHeight:s,offsetHeight:a}=t.target;e+a>=s-100&&(this.lockUp=!0,this.page+=1,this.pullUp())},pullUp(){(0,m.d7)(this.$route.params.id,this.page).then((({comments:t})=>{this.commentList=[...this.commentList,...t]}))}}},c=r,u=s(1001),d=(0,u.Z)(c,a,i,!1,null,"a93ee9ec",null),h=d.exports},6250:function(t,e,s){s.d(e,{q:function(){return i}});var a=s(629);(0,a.Se)(["playing","currentMusic"]),(0,a.OI)({setPlaying:"SET_PLAYING"}),(0,a.nv)(["selectPlay"]);const i={data(){return{mmLoadShow:!0}},methods:{_hideLoad(){let t;clearTimeout(t),t=setTimeout((()=>{this.mmLoadShow=!1}),200)}}}}}]);
//# sourceMappingURL=812.ffbf0867.js.map