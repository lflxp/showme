(self["webpackChunkvue_mmplayer"]=self["webpackChunkvue_mmplayer"]||[]).push([[971],{8566:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"mm-loading",style:{backgroundColor:t.loadingBgColor}},[e("div",{staticClass:"mm-loading-content"},[e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])},i=[],o={name:"MmLoading",props:{value:{type:Boolean,default:!0},loadingBgColor:{type:String,default:""}}},a=o,s=n(1001),l=(0,s.Z)(a,r,i,!1,null,null,null),c=l.exports},5885:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mm-no-result"},[e("p",{staticClass:"mm-no-result-text",on:{click:function(e){t.dialogVisible=!0}}},[t._v(t._s(t.title))]),e("el-dialog",{attrs:{title:"上传文件",visible:t.dialogVisible,width:"35%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/api/music/local/upload",multiple:""}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])])],1)],1)},i=[],o={name:"MmNoResult",props:{title:{type:String,default:""}},data:function(){return{dialogVisible:!1}}},a=o,s=n(1001),l=(0,s.Z)(a,r,i,!1,null,null,null),c=l.exports},531:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});n(8309);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"music-list flex-col"},[t.list.length>0?[e("div",{staticClass:"list-item list-header"},[e("span",{staticClass:"list-name"},[t._v("歌曲")]),e("span",{staticClass:"list-artist"},[t._v("歌手")]),t.isDuration?e("span",{staticClass:"list-time"},[t._v("时长")]):e("span",{staticClass:"list-album"},[t._v("专辑")])]),e("div",{ref:"listContent",staticClass:"list-content",on:{scroll:function(e){return t.listScroll(e)}}},[t._l(t.list,(function(n,r){return e("div",{key:n.id,staticClass:"list-item",class:{on:t.playing&&t.currentMusic.id===n.id},on:{dblclick:function(e){return t.selectItem(n,r,e)}}},[e("span",{staticClass:"list-num",domProps:{textContent:t._s(r+1)}}),e("div",{staticClass:"list-name"},[e("span",[t._v(t._s(n.name))]),e("div",{staticClass:"list-menu"},[e("mm-icon",{staticClass:"hover",attrs:{type:t.getPlayIconType(n),size:40},on:{click:function(e){return e.stopPropagation(),t.selectItem(n,r)}}}),e("mm-icon",{staticClass:"hover",attrs:{type:"ic_get_app",size:40},on:{click:function(e){return e.stopPropagation(),t.comeonbaby(n)}}})],1)]),e("span",{staticClass:"list-artist"},[t._v(t._s(n.singer))]),t.isDuration?e("span",{staticClass:"list-time"},[t._v(" "+t._s(t._f("format")(n.duration%3600))+" "),e("mm-icon",{staticClass:"hover list-menu-icon-del",attrs:{type:"delete-mini",size:40},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}})],1):e("span",{staticClass:"list-album"},[t._v(t._s(n.album))])])})),t._t("listBtn")],2)]:e("mm-no-result",{attrs:{title:"弄啥呢，怎么啥也没有！！！"}})],2)},i=[],o=n(6080),a=(n(4916),n(7601),n(629)),s=n(6879),l=n(5885),c=n(60),u="album",h="duration",f="pullup",p=100,d={name:"MusicList",components:{MmNoResult:l.Z},filters:{format:s.WU},props:{list:{type:Array,default:function(){return[]}},listType:{type:String,default:u}},data:function(){return{lockUp:!0}},computed:(0,o.Z)({isDuration:function(){return this.listType===h}},(0,a.Se)(["playing","currentMusic"])),watch:{list:function(t,e){this.listType===f&&(t.length!==e.length||t[t.length-1].id!==e[e.length-1].id)&&(this.lockUp=!1)}},activated:function(){this.scrollTop&&this.$refs.listContent&&(this.$refs.listContent.scrollTop=this.scrollTop)},methods:(0,o.Z)({listScroll:function(t){var e=t.target.scrollTop;if(this.scrollTop=e,this.listType===f&&!this.lockUp){var n=t.target,r=n.scrollHeight,i=n.offsetHeight;e+i>=r-p&&(this.lockUp=!0,this.$emit("pullUp"))}},scrollTo:function(){this.$refs.listContent.scrollTop=0},comeonbaby:function(t){var e=this;(0,c.LR)(t).then((function(t){void 0===t.data||null===t.data?e.$mmToast(t.errorCode):e.$mmToast(t.data)}))},selectItem:function(t,e,n){n&&/list-menu-icon-del/.test(n.target.className)||(this.currentMusic.id&&t.id===this.currentMusic.id?this.setPlaying(!this.playing):this.$emit("select",t,e))},getPlayIconType:function(t){var e=t.id,n=this.playing,r=this.currentMusic.id;return n&&r===e?"pause-mini":"play-mini"},deleteItem:function(t){this.$emit("del",t)}},(0,a.OI)({setPlaying:"SET_PLAYING"}))},v=d,m=n(1001),y=(0,m.Z)(v,r,i,!1,null,"45b6031d",null),g=y.exports},4971:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return L}});n(3210);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search flex-col"},[e("mm-loading",{model:{value:t.mmLoadShow,callback:function(e){t.mmLoadShow=e},expression:"mmLoadShow"}}),e("div",{staticClass:"search-head"},[t._l(t.Artists,(function(n,r){return e("span",{key:r,on:{click:function(e){return t.clickHot(n.first)}}},[t._v(" "+t._s(n.first)+" ")])})),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchValue,expression:"searchValue",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"text",placeholder:"音乐/歌手"},domProps:{value:t.searchValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)},input:function(e){e.target.composing||(t.searchValue=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})],2),e("div",{staticClass:"flex-1 overflow-hidden"},[e("music-list",{ref:"musicList",attrs:{list:t.list,"list-type":"pullup"},on:{select:t.selectItem,pullUp:t.pullUpLoad}})],1)],1)},i=[],o=(n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(2443),n(3680),n(3706),n(2703),n(489),n(1703),n(7658),n(4747),n(8309),n(8304),n(2123),n(7042),n(2434));function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(O){u=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new S(i||[]);return r(a,"_invoke",{value:x(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(O){return{type:"throw",arg:O}}}t.wrap=h;var p={};function d(){}function v(){}function m(){}var y={};u(y,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(T([])));w&&w!==e&&n.call(w,s)&&(y=w);var _=m.prototype=d.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function i(r,a,s,l){var c=f(t[r],t,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==(0,o.Z)(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return i("throw",t,s,l)}))}l(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return v.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(L.prototype),u(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function s(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){s(o,r,i,a,l,"next",t)}function l(t){s(o,r,i,a,l,"throw",t)}a(void 0)}))}}var c=n(3698),u=n(6080),h=(n(4916),n(5306),n(2222),n(629)),f=n(60),p=n(1722),d=n(8566),v=n(531),m=n(6250),y=n(6879),g={name:"Search",components:{MmLoading:d.Z,MusicList:v.Z},mixins:[m.q],data:function(){return{searchValue:"",Artists:[],list:[],page:0,lockUp:!0}},computed:(0,u.Z)({},(0,h.Se)(["playing","currentMusic"])),watch:{list:function(t,e){(t.length!==e.length||t[t.length-1].id!==e[e.length-1].id)&&(this.lockUp=!1)}},created:function(){var t=this;(0,f.wP)().then((function(e){var n=e.result;t.Artists=n.hots.slice(0,5),t.mmLoadShow=!1}))},methods:(0,u.Z)((0,u.Z)({clickHot:function(t){this.searchValue=t,this.onEnter()},onEnter:function(){var t=this;""!==this.searchValue.replace(/(^\s+)|(\s+$)/g,"")?(this.mmLoadShow=!0,this.page=0,this.list.length>0&&this.$refs.musicList.scrollTo(),(0,f.yC)(this.searchValue).then((function(e){var n=e.result;t.list=(0,p.sN)(n.songs),t._hideLoad()}))):this.$mmToast("搜索内容不能为空！")},pullUpLoad:function(){var t=this;this.page+=1,(0,f.yC)(this.searchValue,this.page).then((function(e){var n=e.result;n.songs?t.list=[].concat((0,c.Z)(t.list),(0,c.Z)((0,p.sN)(n.songs))):t.$mmToast("没有更多歌曲啦！")}))},selectItem:function(t){var e=this;return l(a().mark((function n(){var r;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e._getMusicDetail(t.id);case 3:r=n.sent,t.image=(0,y.Hr)(r),e.selectAddPlay(t),(0,f.cf)(t),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),e.$mmToast("哎呀，出错啦~");case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},_getMusicDetail:function(t){return(0,f.XL)(t).then((function(t){return t.songs[0].al.picUrl}))}},(0,h.OI)({setPlaying:"SET_PLAYING"})),(0,h.nv)(["selectAddPlay"]))},w=g,_=n(1001),b=(0,_.Z)(w,r,i,!1,null,"e4242cea",null),L=b.exports},6250:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(6080),i=n(629),o=((0,r.Z)({},(0,i.Se)(["playing","currentMusic"])),(0,r.Z)((0,r.Z)({selectItem:function(t,e){t.id===this.currentMusic.id&&this.playing?this.setPlaying(!1):this.selectPlay({list:this.list,index:e})}},(0,i.OI)({setPlaying:"SET_PLAYING"})),(0,i.nv)(["selectPlay"])),{data:function(){return{mmLoadShow:!0}},methods:{_hideLoad:function(){var t,e=this;clearTimeout(t),t=setTimeout((function(){e.mmLoadShow=!1}),200)}}})},3706:function(t,e,n){var r=n(7854),i=n(8003);i(r.JSON,"JSON",!0)},2703:function(t,e,n){var r=n(8003);r(Math,"Math",!0)},489:function(t,e,n){var r=n(2109),i=n(7293),o=n(7908),a=n(9518),s=n(8544),l=i((function(){a(1)}));r({target:"Object",stat:!0,forced:l,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},2123:function(t,e,n){"use strict";var r=n(9781),i=n(7045),o=n(111),a=n(7908),s=n(4488),l=Object.getPrototypeOf,c=Object.setPrototypeOf,u=Object.prototype,h="__proto__";if(r&&l&&c&&!(h in u))try{i(u,h,{configurable:!0,get:function(){return l(a(this))},set:function(t){var e=s(this);(o(t)||null===t)&&o(e)&&c(e,t)}})}catch(f){}},8304:function(t,e,n){var r=n(2109),i=n(7674);r({target:"Object",stat:!0},{setPrototypeOf:i})},2443:function(t,e,n){var r=n(6800);r("asyncIterator")},3680:function(t,e,n){var r=n(5005),i=n(6800),o=n(8003);i("toStringTag"),o(r("Symbol"),"Symbol")}}]);
//# sourceMappingURL=971-legacy.26744f7b.js.map